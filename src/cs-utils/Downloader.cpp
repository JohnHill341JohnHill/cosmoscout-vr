////////////////////////////////////////////////////////////////////////////////////////////////////
//                               This file is part of CosmoScout VR                               //
//      and may be used under the terms of the MIT license. See the LICENSE file for details.     //
//                        Copyright: (c) 2019 German Aerospace Center (DLR)                       //
////////////////////////////////////////////////////////////////////////////////////////////////////

#include "Downloader.hpp"

#include "../cs-utils/filesystem.hpp"

namespace cs::utils {

////////////////////////////////////////////////////////////////////////////////////////////////////

Downloader::Downloader(size_t threadCount)
    : mThreadPool(threadCount) {
}

////////////////////////////////////////////////////////////////////////////////////////////////////

void Downloader::download(std::string const& url, std::string const& file) {
  mThreadPool.enqueue([file, url]() {
    if (!boost::filesystem::exists(file)) {
      filesystem::downloadFile(url, file, true);
    }
  });
}

////////////////////////////////////////////////////////////////////////////////////////////////////

bool Downloader::hasFinished() const {
  return mThreadPool.hasFinished();
}

////////////////////////////////////////////////////////////////////////////////////////////////////

} // namespace cs::utils
